@model MenuViewModel
@{
	ViewData["Title"] = "Dishes";
	Layout = "_HomeLayout";
}

<div class="container mt-5">
	<h1 class="mb-4 text-center">Explore Our Menu</h1>

	<div class="text-end mb-4">
		<a class="btn btn-outline-secondary" data-bs-toggle="collapse" href="#filterForm" role="button" aria-expanded="false" aria-controls="filterForm">
			<i class="bi bi-filter-circle"></i> Filters
		</a>
	</div>

	<div class="collapse mb-4" id="filterForm">
		<form class="filter-form" method="get">
			<div class="mb-3">
				<label asp-for="Keyword" class="form-label">Keyword Search</label>
				<input class="form-control" asp-for="Keyword" id="keyword" type="search" placeholder="Search by name">
			</div>

			<div class="mb-3">
				<label class="form-label">Category</label><br />
				<div class="form-check form-check-inline">
					@foreach (var category in Model.Categories)
					{
						<div class="form-check form-check-inline">
							<label class="form-check-label" for="@category.CategoryName">@category.CategoryName</label>
							<input class="form-check-input" type="checkbox" name="@category.CategoryName" id="@category.CategoryName" value="@category.CategoryId" checked="@category.IsSelected">
						</div>
					}
				</div>
			</div>

			<div class="d-flex justify-content-between mt-3">
				<button type="button" class="btn btn-outline-secondary" id="resetButton">Reset</button>
				<button type="submit" class="btn btn-primary">Apply</button>
			</div>
		</form>
	</div>

	@if (!Model.Dishes.Any())
	{
		<div class="text-center mt-5">
			<h2>No dishes found.</h2>
			<p class="text-muted">Try adjusting your filters or search.</p>
		</div>
	}
	else
	{
		<div class="row">
			@foreach (var category in Model.Dishes.GroupBy(dish => dish.CategoryName))
			{
				<div class="col-12 mt-4 mb-2">
					<h3 class="text-secondary">@category.Key</h3>
					<hr class="mb-3">
				</div>

				@foreach (var item in category)
				{
					<div class="col-md-4 mb-4">
						<div class="card border-0 shadow-sm h-100 text-center">
							<a asp-action="Details" asp-route-id="@item.DishId" class="text-decoration-none">
								<img src="@item.ImagePath" class="card-img-top rounded-top" alt="Image of @item.DishName">
								<div class="card-body">
									<h5 class="card-title">@item.DishName</h5>
									<p class="card-text">@item.Description</p>
									<p class="card-text text-muted">@item.Price.ToString("C")</p>
								</div>
							</a>
							<div class="card-footer bg-white border-top-0">
								<a asp-controller="Cart" asp-action="AddToCart" asp-route-dishId="@item.DishId" asp-route-returnUrl="@ViewContext.HttpContext.Request.Path" class="btn btn-outline-primary w-100">Add to Cart</a>
							</div>
						</div>
					</div>
				}
			}
		</div>
	}
</div>

@* <style>
	body {
		font-family: 'Roboto', sans-serif;
		background-color: #f0f0f0;
	}

	h1, h3 {
		font-weight: 700;
		color: #333333;
	}

	.card {
		border-radius: 10px;
		transition: transform 0.2s;
	}

		.card:hover {
			transform: scale(1.03);
		}

		.card img {
			width: 100%;
			height: 360px;
			object-fit: cover;
			border-radius: 10px 10px 0 0;
		}

	.btn-outline-primary {
		border-radius: 20px;
	}

	.filter-form {
		border: 1px solid #e0e0e0;
		border-radius: 8px;
		padding: 20px;
		background-color: #fff;
	}

		.filter-form .form-label {
			font-weight: bold;
		}

	.collapse {
		margin-top: 20px;
	}

	.dropdown-menu {
		max-height: 250px;
		overflow-y: auto;
	}
</style>

<script>
	document.getElementById('resetButton').addEventListener('click', function () {
		document.getElementById('keyword').value = '';

		const checkboxes = document.querySelectorAll('input[name="SelectedCategories"]');

		checkboxes.forEach((checkbox) => {
			checkbox.checked = false;
		});
	});
</script>

</style> *@
