@model ContentItem

<form method="post" asp-action="Highlight" id="form" enctype="multipart/form-data">
	<partial name="Partials/_ModalHeader" model='"Edit Highlight"' />

	<div class="modal-body" id="modalBody">
		<div class="mb-3">
			<img class="rounded-circle shadow-sm mx-auto d-block object-fit-cover" width="140" height="140" id="preview" src="@Model.ImagePath" onerror="this.src='https://placehold.co/140x140'" />
		</div>

		<div class="form-floating mb-3">
			<input asp-for="Heading" class="form-control fw-bold" />
			<label asp-for="Heading"></label>
			<span asp-validation-for="Heading" class="text-danger"></span>
		</div>

		<div class="form-floating mb-3">
			<textarea asp-for="Description" class="form-control"></textarea>
			<label asp-for="Description"></label>
			<span asp-validation-for="Description" class="text-danger"></span>
		</div>

		<div class="mb-3">
			<input asp-for="ImagePath" type="hidden" />
			<div class="input-group">
				<label for="file" class="input-group-text">Image</label>
				<input name="file" type="file" class="form-control" onchange="previewImage(event)" accept="image/*" />
			</div>
			@Html.ValidationMessage("file", "", new { @class = "text-danger" })
		</div>

	</div>

	@{
		string saveButton = "<button type='submit' class='btn btn-primary'>Save</button>";
	}

	<partial name="Partials/_ModalFooter" model='@saveButton' />

</form>

<script>
	function previewImage(e) {
		var input = e.target;

		// Ensure that a file is selected
		if (input.files && input.files[0]) {
			var reader = new FileReader();
			reader.onload = function (e) {
				var img = document.getElementById("preview");
				img.src = reader.result;
			};
			reader.readAsDataURL(input.files[0]);
		} else {
			// If no file is selected, revert to the placeholder image
			document.getElementById("previewImage").src = 'https://placehold.co/1024x512';
		}
	}


